<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√©todo de Entrega</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
        body{background:#f8f9fa;color:#333;line-height:1.6}
        .header{background:linear-gradient(135deg,#8B0000,#A52A2A);color:white;padding:20px 0}
        .nav{display:flex;justify-content:space-between;align-items:center;padding:0 20px;max-width:1200px;margin:0 auto}
        .logo{font-size:24px;font-weight:bold}
        .nav-links{display:flex;gap:20px}
        .nav a{color:white;text-decoration:none;padding:8px 16px;border-radius:4px;transition:background-color 0.3s}
        .nav a:hover{background:rgba(255,255,255,0.1)}
        .container{max-width:800px;margin:0 auto;padding:20px}
        .delivery-title{text-align:center;margin:30px 0;color:#8B0000;font-size:32px}
        .delivery-title:after{content:'';display:block;width:100px;height:3px;background:#8B0000;margin:10px auto}
        .progress-bar{display:flex;justify-content:space-between;margin:30px 0;position:relative}
        .progress-bar:before{content:'';position:absolute;top:15px;left:0;right:0;height:3px;background:#ddd;z-index:1}
        .progress-step{position:relative;z-index:2;text-align:center;flex:1}
        .step-circle{width:35px;height:35px;border-radius:50%;background:white;border:3px solid #ddd;display:flex;align-items:center;justify-content:center;margin:0 auto 10px;font-weight:bold;color:#666}
        .step-circle.active{border-color:#8B0000;background:#8B0000;color:white}
        .step-label{font-size:14px;color:#666}
        .step-label.active{color:#8B0000;font-weight:600}
        .delivery-options{background:white;border-radius:12px;padding:30px;margin-bottom:20px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
        .option-group{margin-bottom:25px;padding-bottom:20px;border-bottom:1px solid #f0f0f0}
        .option-group:last-child{border-bottom:none;margin-bottom:0}
        .option-label{display:block;margin-bottom:15px;font-weight:bold;font-size:18px;color:#333}
        .radio-options{display:flex;flex-direction:column;gap:15px}
        .radio-option{display:flex;align-items:center;padding:20px;border:2px solid #eee;border-radius:10px;cursor:pointer;transition:all 0.3s;position:relative}
        .radio-option:hover,.radio-option.selected{border-color:#8B0000;background:#fff9f9}
        .radio-option input{margin-right:15px;transform:scale(1.2);accent-color:#8B0000}
        .option-content{flex:1}
        .option-title{font-weight:bold;font-size:16px;margin-bottom:5px;color:#333}
        .option-description{color:#666;font-size:14px;margin-bottom:8px}
        .option-price{color:#8B0000;font-weight:bold;font-size:16px}
        .option-badge{position:absolute;top:10px;right:10px;background:#27ae60;color:white;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:bold}
        .form-section{background:#f9f9f9;padding:25px;border-radius:8px;margin-top:20px;border-left:4px solid #8B0000;display:none}
        .form-section.active{display:block}
        .form-group{margin-bottom:20px}
        .form-group label{display:block;margin-bottom:8px;font-weight:600;color:#333}
        .form-control{width:100%;padding:12px 15px;border:2px solid #ddd;border-radius:8px;font-size:16px;transition:border-color 0.3s}
        .form-control:focus{border-color:#8B0000;outline:none}
        select.form-control{height:48px}
        .form-row{display:grid;grid-template-columns:1fr 1fr;gap:15px}
        .time-slots{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-top:10px}
        .time-slot{padding:15px 10px;border:2px solid #ddd;border-radius:8px;text-align:center;cursor:pointer;background:white;transition:all 0.3s;font-weight:500}
        .time-slot:hover,.time-slot.selected{border-color:#8B0000;background:#fff9f9}
        .time-slot.selected{background:#8B0000;color:white;border-color:#8B0000}
        .branch-info{background:white;padding:15px;border-radius:8px;margin-top:15px;border-left:4px solid #27ae60}
        .branch-name{font-weight:bold;margin-bottom:5px;color:#333}
        .branch-address{color:#666;font-size:14px;margin-bottom:8px}
        .branch-hours{color:#8B0000;font-size:14px;font-weight:500}
        .error-message,.success-message{padding:12px 15px;border-radius:8px;margin-top:10px;display:none;font-size:14px}
        .error-message{color:#e74c3c;background:#fdf2f2;border:1px solid #f8d7da}
        .success-message{color:#27ae60;background:#f2fdf2;border:1px solid #d4edda}
        .error-message.show,.success-message.show{display:block}
        .action-buttons{display:flex;justify-content:space-between;gap:15px;margin-top:30px}
        .btn{padding:15px 30px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;font-size:16px;transition:all 0.3s;text-align:center;text-decoration:none;display:flex;align-items:center;justify-content:center;gap:8px;flex:1}
        .btn-primary{background:linear-gradient(135deg,#8B0000,#A52A2A);color:white}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(139,0,0,0.3)}
        .btn-secondary{background:#f8f9fa;color:#333;border:2px solid #ddd}
        .btn-secondary:hover{border-color:#8B0000;color:#8B0000}
        .notification{position:fixed;top:20px;right:20px;background:#27ae60;color:white;padding:15px 25px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.2);transform:translateX(150%);transition:transform 0.3s;z-index:1000}
        .notification.show{transform:translateX(0)}
        .notification.error{background:#e74c3c}
        @media (max-width:768px){
            .container{padding:15px}
            .delivery-options{padding:20px}
            .form-row{grid-template-columns:1fr}
            .action-buttons{flex-direction:column}
            .nav{flex-direction:column;gap:15px}
            .progress-bar{flex-wrap:wrap}
            .progress-step{flex:0 0 50%;margin-bottom:20px}
        }
        @media (max-width:480px){
            .time-slots{grid-template-columns:1fr}
            .radio-option{flex-direction:column;align-items:flex-start}
            .radio-option input{margin-bottom:10px}
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="nav">
            <div class="logo">ü•© Parrilladas</div>
            <div class="nav-links">
                <a href="carrito.html">‚Üê Carrito</a>
                <a href="perfil.html">Perfil</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h2 class="delivery-title">M√©todo de Entrega</h2>
        
        <div class="progress-bar">
            <div class="progress-step"><div class="step-circle">1</div><div class="step-label">Carrito</div></div>
            <div class="progress-step"><div class="step-circle active">2</div><div class="step-label active">Entrega</div></div>
            <div class="progress-step"><div class="step-circle">3</div><div class="step-label">Pago</div></div>
            <div class="progress-step"><div class="step-circle">4</div><div class="step-label">Confirmaci√≥n</div></div>
        </div>
        
        <div class="delivery-options">
            <div class="option-group">
                <span class="option-label">M√©todo de entrega:</span>
                <div class="radio-options">
                    <div class="radio-option selected" onclick="selMetodo('retiro')">
                        <input type="radio" id="pickup" name="deliveryType" checked>
                        <div class="option-content">
                            <div class="option-title">Retiro en Local</div>
                            <div class="option-description">Recoge en sucursal</div>
                            <div class="option-price">Gratis</div>
                        </div>
                        <div class="option-badge">Popular</div>
                    </div>
                    
                    <div class="radio-option" onclick="selMetodo('delivery')">
                        <input type="radio" id="delivery" name="deliveryType">
                        <div class="option-content">
                            <div class="option-title">Delivery a Domicilio</div>
                            <div class="option-description">Env√≠o a tu casa</div>
                            <div class="option-price">$5.000</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="pickupForm" class="form-section active">
                <div class="form-group">
                    <label for="branch">Sucursal:</label>
                    <select id="branch" class="form-control" onchange="actualizarSucursal()">
                        <option value="">Selecciona sucursal</option>
                        <option value="vitacura">Vitacura</option>
                        <option value="las-condes">Las Condes</option>
                        <option value="providencia">Providencia</option>
                        <option value="nunoa">√ëu√±oa</option>
                    </select>
                </div>
                
                <div id="branchInfo" class="branch-info" style="display:none">
                    <div class="branch-name" id="branchName"></div>
                    <div class="branch-address" id="branchAddress"></div>
                    <div class="branch-hours">Horario: 10:00 - 22:00 hrs</div>
                </div>
                
                <div class="form-group">
                    <label>Hora de retiro:</label>
                    <div class="time-slots" id="timeSlots"></div>
                </div>
                
                <div class="success-message" id="pickupSuccess">‚úÖ Retiro programado</div>
            </div>
            
            <div id="deliveryForm" class="form-section">
                <div class="form-group">
                    <label for="address">Direcci√≥n:</label>
                    <textarea id="address" class="form-control" rows="3" placeholder="Direcci√≥n completa"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="comuna">Comuna:</label>
                        <select id="comuna" class="form-control">
                            <option value="">Selecciona comuna</option>
                            <option value="vitacura">Vitacura</option>
                            <option value="las-condes">Las Condes</option>
                            <option value="providencia">Providencia</option>
                            <option value="nunoa">√ëu√±oa</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Tel√©fono:</label>
                        <input type="tel" id="phone" class="form-control" placeholder="+56 9 1234 5678">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Horario preferido:</label>
                    <div class="time-slots">
                        <div class="time-slot">12:00 - 14:00</div>
                        <div class="time-slot selected">14:00 - 16:00</div>
                        <div class="time-slot">16:00 - 18:00</div>
                        <div class="time-slot">18:00 - 20:00</div>
                    </div>
                </div>
                
                <div id="addressError" class="error-message">Direcci√≥n inv√°lida</div>
                <div class="success-message" id="deliverySuccess">‚úÖ Direcci√≥n guardada</div>
            </div>
        </div>
        
        <div class="action-buttons">
            <a href="carrito.html" class="btn btn-secondary">‚Üê Volver</a>
            <button class="btn btn-primary" onclick="guardarEntrega()">Continuar ‚Üí</button>
        </div>
    </div>

    <div class="notification" id="notification">‚úÖ M√©todo guardado!</div>

    <script>
        const sucursales = {
            'vitacura': { nombre: 'Sucursal Vitacura', direccion: 'Av. Vitacura 1234' },
            'las-condes': { nombre: 'Sucursal Las Condes', direccion: 'Av. Apoquindo 5678' },
            'providencia': { nombre: 'Sucursal Providencia', direccion: 'Av. Providencia 9012' },
            'nunoa': { nombre: 'Sucursal √ëu√±oa', direccion: 'Av. Irarr√°zaval 3456' }
        };

        let metodo = 'retiro';
        let horario = null;
        let sucursal = null;

        document.addEventListener('DOMContentLoaded', function() {
            generarHorarios();
            selMetodo('retiro');
        });

        function selMetodo(m) {
            metodo = m;
            document.getElementById('pickup').checked = m === 'retiro';
            document.getElementById('delivery').checked = m === 'delivery';
            
            document.querySelectorAll('.radio-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.radio-option[onclick="selMetodo('${m}')"]`).classList.add('selected');
            
            document.getElementById('pickupForm').classList.toggle('active', m === 'retiro');
            document.getElementById('deliveryForm').classList.toggle('active', m === 'delivery');
            
            ocultarMensajes();
        }

        function generarHorarios() {
            const timeSlots = document.getElementById('timeSlots');
            timeSlots.innerHTML = '';
            
            const ahora = new Date();
            const horaActual = ahora.getHours();
            
            for (let i = 3; i <= 8; i++) {
                const hora = horaActual + i;
                if (hora >= 10 && hora < 22) {
                    const horaFormateada = `${hora}:00`;
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.textContent = `${horaFormateada} hrs`;
                    
                    if (i === 3) {
                        timeSlot.classList.add('selected');
                        horario = horaFormateada;
                    }
                    
                    timeSlot.addEventListener('click', function() {
                        document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                        this.classList.add('selected');
                        horario = this.textContent.trim();
                    });
                    
                    timeSlots.appendChild(timeSlot);
                }
            }
        }

        function actualizarSucursal() {
            const select = document.getElementById('branch');
            const branchInfo = document.getElementById('branchInfo');
            sucursal = select.value;
            
            if (sucursal && sucursales[sucursal]) {
                document.getElementById('branchName').textContent = sucursales[sucursal].nombre;
                document.getElementById('branchAddress').textContent = sucursales[sucursal].direccion;
                branchInfo.style.display = 'block';
            } else {
                branchInfo.style.display = 'none';
            }
        }

        function guardarEntrega() {
            ocultarMensajes();
            
            if (metodo === 'retiro') {
                if (!sucursal) {
                    notificar('Selecciona una sucursal', 'error');
                    return;
                }
                document.getElementById('pickupSuccess').classList.add('show');
                notificar('Retiro programado');
            } else {
                const address = document.getElementById('address').value.trim();
                if (!address || address.length < 10) {
                    document.getElementById('addressError').classList.add('show');
                    notificar('Direcci√≥n inv√°lida', 'error');
                    return;
                }
                document.getElementById('deliverySuccess').classList.add('show');
                notificar('Direcci√≥n guardada');
            }
            
            setTimeout(() => {
                // window.location.href = 'pago.html';
            }, 1500);
        }

        function ocultarMensajes() {
            document.querySelectorAll('.error-message, .success-message').forEach(msg => msg.classList.remove('show'));
        }

        function notificar(mensaje, tipo = 'success') {
            const notification = document.getElementById('notification');
            notification.innerHTML = `<span>${mensaje}</span>`;
            notification.className = `notification ${tipo} show`;
            setTimeout(() => notification.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>