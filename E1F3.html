<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PARRILLADAS FAMILIARES</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #f6f5f3, #042490);
    height: 100vh; 
    margin: 0;
  }
  .form-box {
    background: #fff; 
    padding: 25px; 
    border-radius: 12px;
    width: 320px; 
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    text-align: center;
  }
  .form-box h1 {
    color: #042490;
    margin-bottom: 10px;
  }
  .form-box p {
    margin-bottom: 20px;
    color: #555;
  }
  form {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
  }
  input[type="email"],
  input[type="password"] {
    width: 85%;
    padding: 10px;
    margin: 8px 0;
    border: 2px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
    text-align: center; 
    box-sizing: border-box;
  }
  button {
    width: 85%;
    padding: 10px;
    margin-top: 15px;
    border: none;
    border-radius: 8px;
    background: #06048a;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #0eabc7;
  }
  small {
    color: #e74c3c;
    display: block;
    height: 14px;
    text-align: left;
    width: 85%;
    margin-bottom: 5px;
  }
  .mensaje {
    margin-top: 15px;
    padding: 10px;
    border-radius: 8px;
    font-weight: 600;
    display: none;
    width: 85%;
    margin-left: auto;
    margin-right: auto;
  }
  .exito {
    background: #2ecc71; 
    color: #fff;
  }
  .error {
    background: #e74c3c; 
    color: #fff;
  }
  .nav {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
  }
  .nav-btn {
    flex: 1;
    padding: 8px;
    margin: 0 5px;
    border: none;
    border-radius: 5px;
    background: #ddd;
    cursor: pointer;
    font-size: 12px;
  }
  .nav-btn.activo {
    background: #06048a;
    color: white;
  }
  .paso {
    display: none;
  }
  .paso.activo {
    display: block;
  }
</style>
</head>
<body>
<div class="form-box">
  <div class="nav">
    <button class="nav-btn activo" onclick="location.href='E1F3.html'">Recuperar Contraseña</button>
  </div>

  <!-- Paso 1: Solicitar correo -->
  <div id="paso1" class="paso activo">
    <h1>PARRILLADAS FAMILIARES DON EDUARDO</h1>
    <p>Recuperar contraseña</p>
    
    <form id="solicitudForm">
      <input type="email" id="email" placeholder="Correo electrónico" value="eduardo@ejemplo.com" required>
      <small id="error-email"></small>
      <button type="submit">Enviar enlace de recuperación</button>
    </form>
    
    <div style="margin-top: 15px; font-size: 14px;">
      <p><a href="E1F2.html" style="color: #06048a; text-decoration: none;">Volver al login</a></p>
    </div>
  </div>

  <!-- Paso 2: Enlace enviado -->
  <div id="paso2" class="paso">
    <h1>PARRILLADAS FAMILIARES DON EDUARDO</h1>
    <div style="font-size: 48px; color: #2ecc71; margin: 15px 0;">✓</div>
    <h3>ENLACE ENVIADO</h3>
    <p>Se ha enviado un enlace de recuperación a:</p>
    <p style="font-weight: bold; color: #042490; margin: 10px 0;" id="correoDestino"></p>
    <p style="color: #0eabc7; font-weight: bold; font-size: 14px;">El enlace expira en 15 minutos</p>
    <button onclick="mostrarPaso(3)">Continuar</button>
  </div>

  <!-- Paso 3: Nueva contraseña -->
  <div id="paso3" class="paso">
    <h1>PARRILLADAS FAMILIARES DON EDUARDO</h1>
    <p>Crear nueva contraseña para:<br><span id="correoUsuario" style="font-weight: bold; color: #042490;"></span></p>
    
    <form id="nuevaPassForm">
      <input type="password" id="nuevaPassword" placeholder="Nueva contraseña" required>
      <small id="error-password"></small>
      <input type="password" id="confirmarPassword" placeholder="Confirmar contraseña" required>
      <small id="error-confirm"></small>
      <button type="submit">Actualizar contraseña</button>
    </form>
  </div>

  <!-- Paso 4: Contraseña actualizada -->
  <div id="paso4" class="paso">
    <h1>PARRILLADAS FAMILIARES DON EDUARDO</h1>
    <div style="font-size: 48px; color: #2ecc71; margin: 15px 0;">✓</div>
    <h3>CONTRASEÑA ACTUALIZADA</h3>
    <p>Tu contraseña ha sido restablecida exitosamente</p>
    <button onclick="location.href='E1F2.html'">Ir al login</button>
  </div>
</div>

<script>
function mostrarPaso(numero) {
  document.querySelectorAll('.paso').forEach(p => p.classList.remove('activo'));
  document.getElementById('paso' + numero).classList.add('activo');
}

function validarEmail(e){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);}
function validarPass(p){return /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/.test(p);}
function err(id,txt){document.getElementById(id).textContent=txt;}
function limpiarErrores(){['email','password','confirm'].forEach(c=>err('error-'+c,''));}

document.getElementById("solicitudForm").addEventListener("submit",e=>{
  e.preventDefault();
  limpiarErrores();
  
  const email = document.getElementById("email").value.trim();
  
  if(!email||!validarEmail(email)){
    err("error-email","Correo electrónico inválido");
    return;
  }
  
  document.getElementById("correoDestino").textContent = email;
  document.getElementById("correoUsuario").textContent = email;
  mostrarPaso(2);
});

document.getElementById("nuevaPassForm").addEventListener("submit",e=>{
  e.preventDefault();
  limpiarErrores();
  
  const nuevaPass = document.getElementById("nuevaPassword").value;
  const confirmPass = document.getElementById("confirmarPassword").value;
  
  if(!nuevaPass||!validarPass(nuevaPass)){
    err("error-password","Contraseña no cumple requisitos");
    return;
  }
  
  if(confirmPass!==nuevaPass){
    err("error-confirm","Las contraseñas no coinciden");
    return;
  }
  
  mostrarPaso(4);
});

mostrarPaso(1);
</script>
</body>
</html>